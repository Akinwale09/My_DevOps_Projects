# Terraform EC2 Instance with Key Pair and UserData

## Mini Project: Terraform EC2 Instance with Key Pair and User Data

### Purpose:

In this mini project, we will use Terraform to automate the launch of an EC2 instance on AWS. The project includes the generation of a downloadable key pair for the instance and the execution of a user data script to install and configure Apache HTTP server.

### Objectives:

1. **Terraform Configuration:**

    - Learn how to write Terraform code to launch an EC2 instance with specified configurations.

2. **Key Pair Generation:**

    - Generate a key pair and make it downloadable after EC2 instance creation.

3. **User Data Execution:**

    - Use Terraform to execute a user data script on the EC2 instance during launch.

### Project Tasks:

**Task 1: Terraform Configuration for EC2 Instance**

1. Create a new directory for your Terraform project (e.g., `terraform-ec2-keypair`).

2. Inside the project directory, create a Terraform configuration file (e.g., `main.tf`).

3. Write Terraform code to create an EC2 instance with the following specifications:

    - Instance type: `t2.micro`
    - Key pair: Generate a new key pair and make it downloadable.
    - Security group: Allow incoming traffic on `port 80`.

4. Initialize the Terraform project using the command: `terraform init`.

5. Apply the Terraform configuration to create the EC2 instance using the command: `terraform apply`.


**Task 2: User Data Script Execution**

1. Extend your Terraform configuration to include the execution of the provided user data script.

2. Modify the user data script to install and configure Apache HTTP server.

3. Apply the updated Terraform configuration to launch the EC2 instance with the user data script using the command: `terraform apply`.

**Task 3: Accessing the Web Server**

1. After the EC2 instance is created and running, access the Apache web server by using its public IP address.

2. Verify that the web server displays the "Hello World" message generated by the user data script.

## Instructions:

1. Create a new directory for your Terraform project using a terminal (`mkdir terraform-ec2-keypair`).

    ![mkdirterraformec2](./img/01.%20mkdir.png)

2. Change into the project directory (`cd terraform-ec2-keypair`).

    ![cdtoterraform](./img/02.%20cd.png)

3. Create a Terraform configuration file (`nano or vim main.tf`).

    ![vimmain.tf](./img/03.%20vimmain.tf.png)

4. Copy and paste the sample Terraform configuration template into your file.

![Configfile](./img/04.%20configfile.png)

### Refactor Terraform Configuration File

![CodeRefactor](./img/11.%20TFConfig.png)
![CodeRefactor](./img/12.%20TFConfig.png)
![CodeRefactor](./img/13.%20TFConfig.png)
![CodeRefactor](./img/14.%20TFConfig.png)
![CodeRefactor](./img/15.%20TFConfig.png)
![CodeRefactor](./img/16.%20TFConfig.png)

5. Save the file and initialize the Terraform project using `terraform init`.

![Terraform Init](./img/05.%20TFInit.png)

6. Apply the Terraform configuration using: `terraform validate, terraform plan`and `terraform apply` and confirm the creation of the EC2 instance.

![TerraformValidate](./img/06.%20TFValidate.png)
![TerraformPlan](./img/07.%20TFPlan.png)
![TerraformPlan](./img/08.%20TFPlan.png)
![TerraformApply](./img/09.%20TFApply.png)
![TerraformApply](./img/10.%20TFApply.png)

7. Access the Apache web server on the created EC2 instance using its public IP address.

![EC2Instance](./img/17.%20EC2InstanceCreated.png)

![ApacheWebServer](./img/18.%20ApacheWebServer.png)

8. Document your observations and any challenges faced during the project.


**Side Note:**

- Ensure you have the AWS CLI installed and configured with appropriate credentials.
- The provided AMI ID is just an example; replace it with the ID of a suitable AMI in your desired region.
- Modify the security group ID to match your requirements.
- This is a learning exercise; use it to gain hands-on experience with Terraform for infrastructure as code.

Destroy the Web Server with:

`terraform destroy`

![TerraformDestroy](./img/19.%20TFDestroy.png)
![TerraformDestroy](./img/20.%20Destroy.png)



END.

